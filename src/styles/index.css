@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent horizontal scroll from any bleed elements */
html, body, #root { overflow-x: hidden; }

/* Scrollbar tweaks */
*::-webkit-scrollbar { height: 8px; width: 10px; }
*::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 4px; }

/* Skeleton shimmer */
.skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,0.06) 25%, rgba(255,255,255,0.12) 37%, rgba(255,255,255,0.06) 63%);
  background-size: 400% 100%;
  animation: shimmer 1.2s infinite;
}
@keyframes shimmer { 0% { background-position: 100% 0; } 100% { background-position: 0 0; } }

/* Utilities for Netflix-style UI */
@layer components {
  /* Spacing tokens */
  :root {
    --gutter-xs: 16px;
    --gutter-sm: 24px;
    --gutter-md: 32px;
    --gutter-lg: 48px;
    --row-gap: 24px;
    --page-gutter: var(--gutter-sm);
  }
  @media (min-width: 768px) { :root { --page-gutter: var(--gutter-md); --row-gap: 28px; } }
  @media (min-width: 1280px) { :root { --page-gutter: var(--gutter-lg); --row-gap: 32px; } }

  .top-20-m {
    top: 20px;
  }
  /* Fixed, global background layer (applied once in App) */
  .app-bg-fixed { position: fixed; inset: 0; z-index: -1; pointer-events: none; }
  /* Grain overlay on the global background */
  .app-bg-fixed::after {
    content: '';
    position: absolute; inset: 0;
    pointer-events: none;
    opacity: 0.06; /* subtle */
    mix-blend-mode: soft-light;
    background-size: 240px 240px;
    background-repeat: repeat;
    background-image: url("data:image/svg+xml;utf8,\
      <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'>\
        <filter id='n'>\
          <feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/>\
          <feColorMatrix type='saturate' values='0'/>\
        </filter>\
        <rect width='100%' height='100%' filter='url(%23n)' opacity='1'/>\
      </svg>");
  }
  /* Top navigation background that fades with scroll */
  .nav-bg {
    position: absolute; inset: 0; pointer-events: none; z-index: 0;
    background: linear-gradient(to bottom,
      rgba(0,0,0, var(--nav-bg-o, 0)) 0%,
      rgba(0,0,0, calc(var(--nav-bg-o, 0) * 0.6)) 60%,
      rgba(0,0,0, 0) 100%
    );
    border-bottom: 1px solid rgba(255,255,255, calc(var(--nav-bg-o, 0) * 0.2));
    backdrop-filter: blur(var(--nav-blur, 0));
    -webkit-backdrop-filter: blur(var(--nav-blur, 0));
    transition: background 200ms ease, border-color 200ms ease, backdrop-filter 200ms ease;
  }
  .input { @apply px-3 py-2 rounded bg-neutral-900 border border-neutral-800 text-sm text-neutral-200 placeholder-neutral-500 focus:outline-none focus:ring-2 focus:ring-white/10; }
  .btn { @apply inline-flex items-center justify-center px-4 py-2 rounded bg-white/10 hover:bg-white/20 text-sm font-medium; }
  .btn-primary { @apply bg-brand hover:bg-brand-600 text-white; }
  .section { @apply px-4 md:px-6 lg:px-10 py-4; }
  .container { @apply max-w-7xl mx-auto; }
  /* App-wide background now matches the former row-band treatment */
  .bg-app-gradient {
    background:
      radial-gradient(1200px 50% at 50% -10%, rgba(255,255,255,0.06), transparent),
      /* warm subtle tint similar to Netflix rows */
      linear-gradient(180deg, rgba(110, 60, 40, .22) 0%, rgba(40, 20, 16, .18) 40%, rgba(20,20,20,.0) 100%),
      linear-gradient(to bottom, #0b0b0b, #141414);
  }
  /* Home screen cinematic gradient tuned to reference: deep red bottom-left,
     muted teal top-right, and a soft vignette over a near-black base. */
  .bg-home-gradient {
    background:
      /* muted teal glow (top-right, primary) */
      radial-gradient(120% 95% at 84% 6%, rgba(20, 76, 84, 0.42), rgba(20, 76, 84, 0.20) 42%, transparent 75%),
      /* deep red glow (bottom-left, primary) */
      radial-gradient(115% 90% at 10% 92%, rgba(122, 22, 18, 0.44), rgba(122, 22, 18, 0.20) 45%, transparent 74%),
      /* subtle red echo (top-left) */
      radial-gradient(110% 85% at 8% 8%, rgba(122, 22, 18, 0.12), rgba(122, 22, 18, 0.06) 40%, transparent 70%),
      /* subtle teal echo (bottom-right) */
      radial-gradient(110% 85% at 92% 92%, rgba(20, 76, 84, 0.12), rgba(20, 76, 84, 0.06) 40%, transparent 70%),
      /* soft edge vignette with minimal additional black */
      radial-gradient(150% 130% at 50% 45%, rgba(0,0,0,0.0) 60%, rgba(0,0,0,0.22) 100%),
      /* base */
      linear-gradient(180deg, #0a0a0a 0%, #0f0f10 50%, #0b0c0d 100%);
  }
  .card { @apply rounded-xl overflow-hidden ring-1 ring-white/5 bg-neutral-900/30; box-shadow: 0 16px 40px rgba(0,0,0,.55), 0 6px 18px rgba(0,0,0,.35); }
  .card-hover { transition: transform 250ms ease, box-shadow 250ms ease; }
  /* Increase magnification on hover; keep shadow flat (no bottom weight) */
  .card-hover:hover { transform: translateY(-2px) scale(1.06); box-shadow: 0 0 0 rgba(0,0,0,0); }
  .shadow-billboard { box-shadow: 0 24px 80px rgba(0,0,0,.65), 0 2px 0 rgba(255,255,255,.06) inset; }
  /* Page gutters for general layout */
  .page-gutter { padding-left: var(--page-gutter); padding-right: var(--page-gutter); }
  /* Row-specific gutters: left padding only, content flows to right edge */
  .row-gutter { padding-left: var(--page-gutter); padding-right: 0; }
  /* Row scroller: extend to full width but keep left start aligned */
  .row-edge {
    -webkit-overflow-scrolling: touch;
    margin-left: calc(var(--page-gutter) * -1);
    padding-left: var(--page-gutter);
    padding-right: 0;
  }
  /* Plain row edge: no negative margin; use outer container gutters */
  .row-edge-plain {
    -webkit-overflow-scrolling: touch;
    margin-left: 0;
    padding-left: 0;
    padding-right: 0;
  }
  /* Viewport bleed that does not create horizontal scroll */
  .bleed { width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw); }
  /* Row band used to render a boxed background per row.
     Weâ€™re de-emphasizing it so rows flow over the page background. */
  .row-band { position: relative; border-radius: 22px; overflow: visible; border: 0; background: transparent; box-shadow: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
  .no-scrollbar::-webkit-scrollbar { display: none; width: 0; height: 0; }
}

/* Details hero layout */
@layer components {
  .hero-overlay { @apply absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent; }
  /* Modern Netflix-like hero info: light scrim, no heavy box */
  .hero-info { position: relative; padding: 1.25rem; padding-left: 1.5rem; padding-right: 1.5rem; }
  @media (min-width: 768px) { .hero-info { padding: 2rem; } }
  .hero-scrim { position: absolute; inset: 0; z-index: 5;
    background: linear-gradient(90deg, rgba(8,8,8,0.80) 0%, rgba(8,8,8,0.55) 40%, rgba(8,8,8,0.22) 68%, rgba(8,8,8,0.0) 85%);
    backdrop-filter: blur(2px) saturate(110%); -webkit-backdrop-filter: blur(2px) saturate(110%);
    border: 0;
  }
  .hero-content { position: relative; z-index: 10; }
  .title-shadow { text-shadow: 0 6px 24px rgba(0,0,0,.8), 0 2px 8px rgba(0,0,0,.6); }
  .cta-primary { @apply inline-flex items-center justify-center h-10 px-5 rounded-md font-semibold bg-white text-black hover:bg-neutral-100 shadow; }
  .cta-ghost { @apply inline-flex items-center h-10 px-4 rounded-md bg-white/10 hover:bg-white/20 text-sm; }
  .chip { @apply inline-flex items-center h-6 px-2 rounded bg-white/10 text-xs text-white mr-2 mb-2 ring-1 ring-white/10; }
  .btn-ghost { @apply inline-flex items-center px-3 py-2 rounded-md bg-white/10 hover:bg-white/20 text-sm; }
  .hero-mute { @apply absolute top-4 right-4 z-10 h-8 w-8 rounded-full bg-black/60 text-white flex items-center justify-center ring-1 ring-white/20; }
  /* Soft blur seam between hero and body to feather the transition */
  .hero-seam {
    position: absolute;
    left: 0; right: 0; bottom: 0;
    height: 120px;
    pointer-events: none;
    z-index: 5; /* below hero content (z-20), above backdrop */
    backdrop-filter: blur(14px) saturate(115%);
    -webkit-backdrop-filter: blur(14px) saturate(115%);
    background: linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(12,12,12,0.28) 55%, #0b0b0b 100%);
  }
  /* New: fade the hero background itself (image/video) so it blends into page */
  .hero-bg { position: absolute; inset: 0; z-index: 0; }
  .hero-bg { -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 75%, rgba(0,0,0,0) 100%); mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 75%, rgba(0,0,0,0) 100%); -webkit-mask-size: 100% 100%; mask-size: 100% 100%; -webkit-mask-repeat: no-repeat; mask-repeat: no-repeat; }

  /* Hero grid layout */
  .hero-grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
  @media (min-width: 768px) { .hero-grid { grid-template-columns: repeat(12,minmax(0,1fr)); gap: 1.25rem; } }
  .hero-col-left { grid-column: 1 / -1; }
  .hero-col-right { grid-column: 1 / -1; }
  @media (min-width: 768px) { .hero-col-left { grid-column: span 7 / span 7; } .hero-col-right { grid-column: span 5 / span 5; } }
  .meta-label { @apply text-neutral-400 text-xs uppercase tracking-wider; }
  .right-list { @apply text-sm text-neutral-300; }

  /* Utility to hide scrollbars */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
